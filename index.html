<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Health Idle</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="app">
    <header class="header">
      <div class="headerLeft">
        <h1>Health Idle</h1>
        <p class="sub">自動跑步＋節奏管理：等結算、接贊助、買裝備，慢慢練出更強的你。</p>
      </div>

      <div class="headerRight">
        <div class="pill">
          <div class="pillLabel">金錢</div>
          <div class="pillValue">$<span id="points">0</span></div>
        </div>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="tabs" aria-label="navigation">
      <button class="tab active" id="tabHome">🏃 主頁</button>
      <button class="tab" id="tabShop">🛒 商店</button>
      <!-- 🏁 賽事 會由 game.js 自動注入 -->
    </nav>

    <!-- ========== HOME ========== -->
    <section id="pageHome">
      <!-- Track -->
      <section class="card">
        <div class="card-title">跑道</div>

        <div class="row between">
          <div>
            <div class="muted micro">本圈進度</div>
            <div class="strong"><span id="lapMiles">0.00</span> / <span id="lapTarget">1.00</span> mile</div>
          </div>
          <div style="text-align:right;">
            <div class="muted micro">總里程</div>
            <div class="strong"><span id="totalMiles">0.0</span> miles</div>
          </div>
        </div>

        <div class="progress-wrap" style="margin-top:10px;">
          <div id="lapBar" class="progress-bar"></div>
          <div id="runner" class="runner" aria-hidden="true">🏃</div>
        </div>

        <div class="row between" style="margin-top:10px;">
          <div class="muted small">狀態：<b id="activity">—</b></div>
          <div class="muted small">下一個解鎖：<b id="nextUnlockText">—</b></div>
        </div>
      </section>

      <section class="grid">
        <!-- Status -->
        <section class="card">
          <h2>狀態</h2>

          <div class="statRow">
            <div class="stat">
              <div class="k">體力</div>
              <div class="v"><span id="energy">0</span> / <span id="energyMax">0</span></div>
              <div class="barWrap"><div id="energyBar" class="bar"></div></div>
            </div>
            <div class="stat">
              <div class="k">健康</div>
              <div class="v"><span id="health">0</span></div>
              <div class="barWrap"><div id="healthBar" class="bar"></div></div>
            </div>
          </div>

          <div class="statRow">
            <div class="stat">
              <div class="k">心肺倍率</div>
              <div class="v"><span id="cardio">1.00</span>x</div>
            </div>
            <div class="stat">
              <div class="k">恢復倍率</div>
              <div class="v"><span id="recovery">1.00</span>x</div>
            </div>
          </div>

          <div class="statRow">
            <div class="stat">
              <div class="k">跑速</div>
              <div class="v"><span id="speed">0.00</span> mile/min</div>
            </div>
            <div class="stat">
              <div class="k">回復/秒</div>
              <div class="v"><span id="regen">0.00</span></div>
            </div>
          </div>

          <p class="hint" id="hint">提示會顯示在這裡。</p>
        </section>

        <!-- Actions + Sponsor -->
        <section class="card">
          <h2>行動</h2>
          <div class="btnRow">
            <button id="workoutBtn">🏋️ 訓練（消耗體力）</button>
            <button id="restBtn">😴 小睡（回體力）</button>
          </div>

          <div class="divider"></div>

          <h3>贊助</h3>
          <div class="row between">
            <div class="muted small">狀態：<b id="sponsorStatus">—</b></div>
            <div class="muted small">倒數：<b id="sponsorCountdown">—</b></div>
          </div>
          <div class="row between" style="margin-top:8px;">
            <button id="sponsorBtn">📣 領取贊助</button>
            <div class="muted small">下一次冷卻會變成：<b id="sponsorNextCd">—</b></div>
          </div>

          <div class="divider"></div>

          <h3>裝備</h3>
          <div class="muted small" id="equipSummary">—</div>
        </section>

        <!-- Timeline + Event -->
        <section class="card">
          <h2>事件時間軸</h2>

          <div class="timeline">
            <div class="timelineItem">
              <div class="k">下一個事件</div>
              <div class="v"><b id="nextEventName">—</b></div>
              <div class="muted small">倒數：<b id="nextEventCountdown">—</b></div>
              <div class="muted small">建議：<span id="nextEventPlan">—</span></div>
            </div>
          </div>

          <div class="divider"></div>

          <div id="eventPanel" class="eventPanel hidden">
            <div class="eventTitle">
              <b id="eventTitle">事件</b>
              <span class="badge" id="eventType">—</span>
            </div>
            <p class="eventDesc" id="eventDesc">—</p>
            <div class="btnRow">
              <button id="acceptEventBtn">✅ 接受</button>
              <button id="skipEventBtn">⏭️ 跳過</button>
            </div>
            <p class="muted small" id="eventFinePrint">—</p>
          </div>

          <p class="muted small">小提示：事件會短暫影響「跑速 / 回復」。接受才會生效。</p>
        </section>
      </section>
    </section>

    <!-- ========== SHOP ========== -->
    <section id="pageShop" class="hidden">
      <section class="card">
        <div class="card-title">商店</div>
        <p class="muted small">買到的裝備會自動裝備（同欄位會被替換）。</p>

        <div class="shopGrid" id="shopList"></div>

        <div class="divider"></div>

        <h3>已擁有</h3>
        <pre class="owned" id="ownedList">（尚未購買任何裝備）</pre>
      </section>
    </section>

    <footer class="footer">
      <span class="muted small">更新後若沒生效：請強制刷新（Ctrl+F5 / Cmd+Shift+R）。</span>
    </footer>
  </main>

  <script src="game.js"></script>
</body>
</html>
