/* Training Idle v2.0 — clean stage + tabs */
:root{
  --bg:#0b1220;
  --stroke:rgba(255,255,255,.10);
  --text:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.65);
  --good:rgba(34,197,94,.9);
  --warn:rgba(251,191,36,.95);
  --bad:rgba(248,113,113,.95);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: radial-gradient(1200px 900px at 20% -10%, rgba(59,130,246,.25), transparent 55%),
              radial-gradient(1100px 700px at 90% 0%, rgba(34,197,94,.18), transparent 55%),
              var(--bg);
  color:var(--text);
}
.app{max-width:980px;margin:0 auto;padding:14px 14px 24px}

.muted{color:var(--muted)}
.small{font-size:12px}
.strong{font-weight:1000}

/* Stage */
.stage{
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border:1px solid var(--stroke);
  border-radius: 22px;
  padding: 14px;
  box-shadow: 0 18px 50px rgba(0,0,0,.35);
}
.stageTop{
  display:flex;align-items:flex-start;justify-content:space-between;
  gap:12px;flex-wrap:wrap;
}
.brand{display:flex;gap:10px;align-items:center}
.logo{
  width:44px;height:44px;border-radius:14px;
  display:grid;place-items:center;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
}
.title{font-weight:1000;letter-spacing:.02em}
.subtitle{font-size:13px;color:var(--muted);margin-top:2px}

.hud{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.hudPill{
  padding:10px 12px;border-radius:16px;
  background:rgba(0,0,0,.22);
  border:1px solid rgba(255,255,255,.08);
  min-width:130px;
}
.hudK{font-size:12px;color:var(--muted);font-weight:900;letter-spacing:.02em}
.hudV{display:flex;align-items:center;gap:6px;margin-top:6px;font-weight:1000}
.hudV.big{font-size:18px}

.bar{width:100%;height:10px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden;margin-top:6px}
.barFill{height:100%;width:0%;background:linear-gradient(90deg, rgba(34,197,94,.9), rgba(96,165,250,.95))}

.trackWrap{margin-top:14px}
.track{
  border-radius:18px;border:1px solid rgba(255,255,255,.08);
  background: radial-gradient(900px 240px at 50% 0%, rgba(255,255,255,.06), transparent 55%),
              rgba(0,0,0,.20);
  padding:12px;
}
.lane{
  position:relative;height:86px;border-radius:16px;
  background: linear-gradient(90deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  overflow:hidden;border:1px solid rgba(255,255,255,.06);
}
.trackFill{position:absolute;left:0;top:0;bottom:0;width:0%;
  background:linear-gradient(90deg, rgba(96,165,250,.22), rgba(34,197,94,.18))}
.mark.finish{position:absolute;right:10px;top:28px;opacity:.9}
.runner{
  position:absolute;top:20px;left:0%;font-size:40px;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
  transition:left .10s linear;
}
.runner.run{animation:bob .30s infinite alternate ease-in-out}
.runner.good{filter: drop-shadow(0 12px 24px rgba(34,197,94,.22))}
.runner.bad{filter: drop-shadow(0 12px 24px rgba(248,113,113,.25))}
@keyframes bob{from{transform:translateY(0)}to{transform:translateY(-4px)}}

.stageMeta{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-top:10px;flex-wrap:wrap}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.04);
  font-weight:1000;font-size:12px;
}

.stageOverlay{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-weight:1000;letter-spacing:.08em;text-transform:uppercase;
  text-shadow:0 14px 30px rgba(0,0,0,.45);
  pointer-events:none;opacity:0;transform:scale(.98);
  transition:opacity .18s ease, transform .18s ease;
}
.stageOverlay.show{opacity:1;transform:scale(1)}
.hidden{display:none}

.confetti{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.confettiPiece{position:absolute;top:-12px;width:8px;height:12px;border-radius:2px;opacity:0;animation:confettiFall 850ms ease-out forwards}
@keyframes confettiFall{
  0%{opacity:0; transform:translateY(0) rotate(0deg)}
  10%{opacity:1}
  100%{opacity:0; transform:translateY(60px) rotate(240deg)}
}

/* Tabs */
.tabs{display:flex;gap:10px;margin-top:12px}
.tabBtn{
  flex:1;padding:12px 10px;border-radius:16px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  color:var(--text);font-weight:1000;cursor:pointer;
}
.tabBtn.active{background:rgba(96,165,250,.14);border-color:rgba(96,165,250,.25)}
.tabBtn:active{transform:translateY(1px)}

.panelWrap{
  margin-top:12px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.08);
  border-radius:22px;
  padding:14px;
}
.panel{display:none}
.panel.active{display:block}
.panelHead{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
h2{margin:0 0 4px 0}
p{margin:0}

/* Switch */
.switch{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.04);
  user-select:none;font-weight:900;
}
.switch input{display:none}
.switch .slider{
  width:42px;height:24px;border-radius:999px;background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.10);position:relative;
}
.switch .slider::after{
  content:"";position:absolute;top:2px;left:2px;
  width:18px;height:18px;border-radius:50%;background:rgba(255,255,255,.85);
  transition:transform .15s ease;
}
.switch input:checked + .slider::after{transform:translateX(18px)}
.switch input:checked + .slider{background:rgba(34,197,94,.20);border-color:rgba(34,197,94,.35)}
.switchText{opacity:.9}

/* Training */
.tracks{
  display:grid;grid-template-columns:repeat(4,minmax(0,1fr));
  gap:10px;margin-top:14px;
}
@media (max-width:840px){.tracks{grid-template-columns:repeat(2,minmax(0,1fr));}}
.trackCard{
  padding:12px;border-radius:18px;background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);cursor:pointer;
}
.trackCard.active{background:rgba(34,197,94,.12);border-color:rgba(34,197,94,.22)}
.trackName{font-weight:1000}
.trackMeta{margin-top:6px;color:var(--muted);font-size:12px}

.levelWrap{margin-top:14px}
.levelHead{
  display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
  padding:12px;border-radius:18px;background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.06);
}
.levels{
  margin-top:10px;display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px;
}
@media (max-width:840px){.levels{grid-template-columns:repeat(3,minmax(0,1fr));}}
.levelBtn{
  padding:10px;border-radius:16px;background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  color:var(--text);font-weight:1000;cursor:pointer;text-align:left;
}
.levelBtn.locked{opacity:.45;cursor:not-allowed}
.levelBtn.active{border-color:rgba(96,165,250,.35);background:rgba(96,165,250,.10)}
.levelRow{display:flex;justify-content:space-between;align-items:center}
.pct.good{color:var(--good)} .pct.warn{color:var(--warn)} .pct.bad{color:var(--bad)}

.hint{
  margin-top:12px;padding:12px;border-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.03);
  color:rgba(255,255,255,.78);font-size:13px;
}

/* Buttons */
.btn{
  padding:10px 12px;border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.05);
  color:var(--text);font-weight:1000;cursor:pointer;
}
.btn.primary{background:rgba(96,165,250,.16);border-color:rgba(96,165,250,.28)}
.btn.danger{background:rgba(248,113,113,.12);border-color:rgba(248,113,113,.28)}
.btn:disabled{opacity:.45;cursor:not-allowed;transform:none!important}
.btn:active{transform:translateY(1px)}

/* Race */
.raceGrid{
  display:grid;grid-template-columns:repeat(4,minmax(0,1fr));
  gap:10px;margin-top:14px;
}
@media (max-width:840px){.raceGrid{grid-template-columns:repeat(2,minmax(0,1fr));}}
.raceCard{
  padding:14px;border-radius:18px;background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  color:var(--text);cursor:pointer;text-align:left;
}
.raceCard.active{background:rgba(96,165,250,.12);border-color:rgba(96,165,250,.24)}
.raceTitle{font-weight:1000;font-size:18px}
.raceResult{
  margin-top:12px;padding:12px;border-radius:18px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.16);
}

/* Shop */
.shopGrid{
  display:grid;grid-template-columns:repeat(3,minmax(0,1fr));
  gap:10px;margin-top:14px;
}
@media (max-width:840px){.shopGrid{grid-template-columns:repeat(1,minmax(0,1fr));}}
.shopItem{padding:14px;border-radius:18px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08)}
.shopTop{display:flex;justify-content:space-between;align-items:center;gap:10px}
.shopName{font-weight:1000}
.shopDesc{margin-top:6px;color:var(--muted);font-size:12px}
.shopBottom{margin-top:10px;display:flex;justify-content:space-between;align-items:center;gap:10px}

/* Settings */
.row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
.details{margin-top:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);border-radius:18px;padding:10px 12px}
.detailsSum{cursor:pointer;font-weight:1000}
.detailsSum::-webkit-details-marker{display:none}
.debug{margin:10px 0 0 0;white-space:pre-wrap;font-size:12px;color:rgba(255,255,255,.75)}


/* ===== Gamey FX (per discipline) ===== */
.fxLayer{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.fx{position:absolute;inset:0;opacity:0;transition:opacity .12s ease}
.fx.show{opacity:1}

.fx.speed::before,.fx.speed::after{
  content:"";position:absolute;top:26px;left:8px;right:52px;height:34px;border-radius:18px;
  background: repeating-linear-gradient(90deg, rgba(255,255,255,.00), rgba(255,255,255,.00) 12px, rgba(255,255,255,.10) 13px, rgba(255,255,255,.10) 14px);
  filter: blur(.2px);
  animation:speed 420ms linear infinite;
  opacity:.35;
}
.fx.speed::after{top:32px;opacity:.22;animation-duration:520ms}
@keyframes speed{from{transform:translateX(0)}to{transform:translateX(-22px)}}

.fx.splash::before{
  content:"";position:absolute;left:0;right:0;bottom:0;height:46px;
  background: radial-gradient(60px 18px at 18% 60%, rgba(96,165,250,.25), transparent 65%),
              radial-gradient(70px 22px at 42% 75%, rgba(96,165,250,.20), transparent 70%),
              radial-gradient(80px 26px at 68% 70%, rgba(96,165,250,.22), transparent 72%),
              radial-gradient(60px 18px at 86% 78%, rgba(96,165,250,.16), transparent 70%);
  animation:wave 900ms ease-in-out infinite;
  opacity:.55;
}
@keyframes wave{0%,100%{transform:translateY(2px)}50%{transform:translateY(-2px)}}

.fx.dust::before{
  content:"";position:absolute;left:0;right:0;bottom:-4px;height:30px;
  background: radial-gradient(40px 16px at 20% 50%, rgba(251,191,36,.22), transparent 70%),
              radial-gradient(46px 18px at 45% 55%, rgba(251,191,36,.18), transparent 72%),
              radial-gradient(44px 18px at 70% 45%, rgba(251,191,36,.20), transparent 72%);
  animation:dust 520ms ease-in-out infinite;
  opacity:.55;
}
@keyframes dust{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.fx.gear::before,.fx.gear::after{
  content:"⚙️";position:absolute;top:18px;font-size:26px;opacity:.20;
  animation:spin 800ms linear infinite;
}
.fx.gear::before{left:18%}
.fx.gear::after{left:62%;top:34px;font-size:22px;animation-duration:650ms}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

.runner.fire{filter: drop-shadow(0 16px 30px rgba(251,191,36,.22));}
.runner.tired{opacity:.92;filter: drop-shadow(0 12px 24px rgba(248,113,113,.22));}
.runner.neutral{opacity:.96}
.runner.good{opacity:1}

.runner.jump{animation:jump 520ms ease-out 1}
@keyframes jump{0%{transform:translateY(0)}40%{transform:translateY(-10px)}100%{transform:translateY(0)}}

.runner.fall{animation:fall 650ms ease-out 1}
@keyframes fall{0%{transform:rotate(0deg)}35%{transform:rotate(-16deg) translateY(2px)}100%{transform:rotate(-10deg) translateY(4px)}}

.lane.shake{animation:shake 420ms ease-in-out 1}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-3px)}50%{transform:translateX(3px)}75%{transform:translateX(-2px)}}

.stageOverlay.perfect{letter-spacing:.14em}
.stageOverlay.success{letter-spacing:.10em}
.stageOverlay.barely{letter-spacing:.12em}
.stageOverlay.fail{letter-spacing:.16em}


/* ===== Queue + Gains ===== */
.levelBtns{display:flex;gap:10px;align-items:center}
.queuePanel{margin-top:12px;padding:12px;border-radius:16px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06)}
.queueHead{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px}
.queueList{display:flex;flex-direction:column;gap:8px;min-height:42px}
.queueItem{display:flex;justify-content:space-between;align-items:center;padding:10px 10px;border-radius:14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.05)}
.queueItem .qL{display:flex;gap:8px;align-items:center}
.queueItem .qTag{font-size:12px;padding:2px 8px;border-radius:999px;background:rgba(96,165,250,.14);border:1px solid rgba(96,165,250,.18)}
.queueItem button{padding:6px 10px;border-radius:10px}
.gainPanel{margin-top:12px;padding:12px;border-radius:16px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06)}
.gainTitle{font-weight:800;margin-bottom:8px}
.gainRow{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-top:1px solid rgba(255,255,255,.06)}
.gainRow:first-of-type{border-top:none}
.gainRow b{font-variant-numeric:tabular-nums}
